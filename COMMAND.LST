                                ;*** AILZ80ASM *** Z-80 Assembler, version 1.0.0.0, LST:Full:4
                                
                                ;   似非COMMAND.COM
                                
                                SYSTEM  EQU 00005H
                                BASE    EQU 0000BH
                                FCB1    EQU 0005CH
                                FCB2    EQU 0006CH
                                DTA1    EQU 00080H
                                
                                LINLEN  EQU 0F3B0H
                                PUTPNT  EQU 0F3F8H
                                GETPNT  EQU 0F3FAH
                                BUF EQU 0F55EH
                                KEYBUF  EQU 0FBF0H
                                KEYBUFE EQU 0FBF0H+40
                                
                                PATHX   EQU 32
                                PATHD   EQU BUF+258-32
                                
                                    ORG 0100H
       0000                 10      JP  START
       0000                     VER:    DB  00DH,00AH,"COMMAND v0.02",00DH,00AH,'$'
       0000                     START:
       0000                 20      LD  SP,(SYSTEM+1)
       0000                  7      LD  C,06FH      ;(BDOS)MSX-DOS のバージョン番号の獲得
       0000                 17      CALL    SYSTEM
       0000                 11      RET C
       0000                 10      LD  HL,0011DH
       0000                 15      SBC HL,BC
       0000                  4      LD  A,H
       0000                 13      LD  (MAJOR_VER),A
       0000                  4      OR  L
       0000                 13      LD  (IS_MSX),A
       0000                 13      LD  A,(DTA1)
       0000                  4      OR  A
       0000                 12      JR  Z,WSTART
       0000                 10      LD  DE,VER
       0000                  7      LD  C,9
       0000                 17      CALL    SYSTEM
       0000                 10      LD  DE,DTA1+1
       0000                 17      CALL    COMANL
       0000                     WSTART:
       0000                 17      CALL    LTNL
       0000                     COMMAND:
       0000                 17      CALL    SETDTA1
       0000                 11      PUSH    DE
       0000                 11      PUSH    BC
       0000                 11      PUSH    HL
       0000                  7      LD  C,019H
       0000                 17      CALL    SYSTEM
       0000                 10      POP HL
       0000                 10      POP BC
       0000                  7      ADD A,'A'
       0000                  4      LD  E,A
       0000                 17      CALL    _PRINT
       0000                  7      LD  E,'>'
       0000                 17      CALL    _PRINT
       0000                 10      POP DE      ;DE=DTA1
       0000                  7      LD  A,80
       0000                  7      LD  (DE),A
       0000                  7      LD  C,0AH       ;(BDOS)文字列入力
       0000                 17      CALL    SYSTEM
       0000                 17      CALL    LTNL
                                
       0000                 10      LD  DE,DTA1+2
       0000                 17      CALL    COMANL
       0000                 12      JR  NC,COMMAND
       0000                 10      LD  DE,COMERM
       0000                  7      LD  C,9     ;(BDOS)文字列出力
       0000                 17      CALL    SYSTEM
       0000                 12      JR  WSTART
                                
       0000                     COMANL:
       0000                 17      CALL    FILE
       0000                 11      PUSH    DE
       0000                 10      LD  DE,FNAME
       0000                  7      LD  A,(DE)
       0000                  7      CP  020H
       0000                 12      JR  Z,SDVSW
       0000                  6      DEC DE
       0000                  7      LD  A,(DE)
       0000                  7      ADD A,0FFH
       0000                 12      JR  C,COMB
       0000                  6      INC DE
                                
       0000                 10      LD  HL,COMTB
       0000                  7      LD  A,COMS
       0000                  4      LD  B,A
       0000                 17      CALL    CPNAME
       0000                     COMB:
       0000                 10      POP DE
       0000                 10      JP  NC,JP_HL
       0000                     COMB2:
       0000                  4      EX  DE,HL
       0000                 16      LD  (COMPAT+1),HL
       0000                 11      PUSH    AF
       0000                 17      CALL    CEXE4
       0000                 10      POP AF
       0000                 10      LD  HL,FNAME
       0000                 10      LD  DE,FCB2+1   ;COMMAND NAME
       0000                 10      LD  BC,11
       0000                         LDIR
       0000                 10      LD  DE,PATHD
       0000                 13      LD  A,(IS_MSX)
       0000                  4      OR  A
       0000                 12      JR  NZ,CEX1
       0000                 10      LD  DE,ZERO
       0000                     CEX1:
       0000                  7      LD  A,(DE)
       0000                  7      CP  020H
       0000                 11      RET C
       0000                 17      CALL    FILEC
       0000                 11      PUSH    DE
       0000                 10      LD  HL,FCB2+1   ;COMMAND NAME
       0000                 10      LD  DE,FNAME
       0000                 10      LD  BC,11
       0000                         LDIR
       0000                 17      CALL    CEXE4
       0000                 10      POP DE
       0000                  6      INC DE
       0000                 12      JR  CEX1
                                
       0000                     SDVSW:
       0000                 10      POP AF
       0000                 13      LD  A,(FDRV)
       0000                  4      DEC A
       0000                  4      LD  E,A
       0000                  7      LD  C,00EH      ;(BDOS)カレント・ドライブの設定
       0000                 12      JR  SYSTEM0
                                
       0000                     OPEN1:
       0000                 10      LD  HL,FDRV
       0000                     OPEN:
       0000                  7      LD  C,011H      ;(BDOS)最初のファイルの検索
       0000                     OPEN3:
       0000                 11      PUSH    DE
       0000                 10      LD  DE,DTA_CCP
       0000                 17      CALL    SETDTA
       0000                  4      EX  DE,HL
       0000                 17      CALL    SYSTEM
       0000                 10      POP DE
       0000                  4      OR  A
       0000                 10      RET
                                
       0000                     OPEN2:
       0000                  7      LD  C,012H
       0000                 12      JR  OPEN3
                                
       0000                     DEFCB:              ;Z=Ok NZ=Error
       0000                 10      LD  DE,DTA_CCP
       0000                 17      CALL    SYSC0F
                                
       0000                 10      LD  HL,0
       0000                 16      LD  (DTA_CCP+33),HL
       0000                 16      LD  (DTA_CCP+35),HL
       0000                 10      LD  DE,DATA
       0000                     SETDTA:
       0000                 11      PUSH    BC
       0000                 11      PUSH    DE
       0000                 11      PUSH    HL
       0000                  7      LD  C,01AH      ;(BDOS)DTAの設定
       0000                 17      CALL    SYSTEM
       0000                 10      POP HL
       0000                 10      POP DE
       0000                 10      POP BC
       0000                 10      RET
                                
       0000                     SETDTA1:
       0000                 10      LD  DE,DTA1
       0000                 12      JR  SETDTA
                                
       0000                     SYSC0F:
       0000                  7      LD  C,00FH      ;(BDOS)ファイルのオープン
       0000                     SYSTEM0:
       0000                 17      CALL    SYSTEM
       0000                  4      OR  A
       0000                 10      RET
                                
       0000                     C_CD:
       0000                 17      CALL    SPCUT
       0000                  7      LD  C,5AH       ;(BDOS)CHDIR カレントディレクトリの変更
       0000                 10      JP  SYSTEM
                                
       0000                     S27DTA:
       0000                 10      LD  DE,1
       0000                 20      LD  (DTA_CCP+14),DE
       0000                 10      LD  DE,DTA_CCP
       0000                     S27:
       0000                  7      LD  C,027H      ;(BDOS)ランダム・ブロック・リード
       0000                 17      CALL    SYSTEM
       0000                  4      OR  A
       0000                 10      RET
                                
       0000                     CEXE4:
       0000                 13      LD  A,(FDRV)
       0000                 13      LD  (00057H),A
       0000                 16      LD  HL,(FDRV+14)
       0000                 16      LD  (00058H),HL
                                
       0000                 10      LD  HL,FNAME+8
       0000                  7      LD  A,(HL)
       0000                  7      CP  020H
       0000                 12      JR  NZ,CEXE7
       0000                  7      LD  A,'?'
       0000                  7      LD  (HL),A
       0000                  6      INC HL
       0000                  7      LD  (HL),A
       0000                  6      INC HL
       0000                  7      LD  (HL),A
       0000                     CEXE7:
       0000                 17      CALL    OPEN1
       0000                     CEXE5:
       0000                 11      RET NZ
       0000                 16      LD  HL,(DTA_CCP+1+9)
       0000                  4      LD  A,H
       0000                 17      CALL    CAP
       0000                  4      LD  H,A
       0000                  4      LD  A,L
       0000                 17      CALL    CAP
       0000                  4      LD  L,A
       0000                 13      LD  A,(DTA_CCP+1+8)
       0000                 17      CALL    CAP
       0000                  7      SUB 'B'
       0000                 12      JR  Z,C_BAT
       0000                  4      DEC A       ;'C'
       0000                 12      JR  Z,C_EXE
       0000                     CEXE6:
       0000                 17      CALL    OPEN2
       0000                 12      JR  CEXE5
                                
       0000                     C_EXE:
       0000                  4      LD  A,H
       0000                  7      CP  'M'
       0000                 12      JR  NZ,CEXE6
                                
       0000                 17      CALL    DEFCB
       0000                 16      LD  HL,(SYSTEM+1)
       0000                 10      LD  DE,DATA
       0000                 15      SBC HL,DE
       0000                 17      CALL    S27DTA
       0000                  4      DEC A
       0000                  4      SCF
       0000                 11      RET NZ
       0000                  4      LD  A,H
       0000                  4      OR  L
       0000                  4      SCF
       0000                 11      RET Z
       0000                 16      LD  (COMSIZ+1),HL
       0000                 17      CALL    SETDTA1
       0000                 10  COMPAT: LD  DE,0
       0000                 17      CALL    SETFCB
                                
       0000                  4      XOR A
       0000                  4      LD  H,A
       0000                  4      LD  L,A ;HL=0x0000
       0000                  4      DI
       0000                 20  SPPAT:  LD  SP,(SYSTEM+1)
       0000                 11      PUSH    HL
       0000                 10      LD  HL,0B0EDH   ;LDIR 
       0000                 16      LD  (000FEH),HL
       0000                 10      LD  HL,DATA
       0000                 10      LD  DE,00100H
       0000                 10  COMSIZ: LD  BC,0
       0000                  4      EI
       0000                 10      JP  000FEH
                                
       0000                     C_BAT:
       0000                 10      LD  DE,'A'+'T'*256
       0000                 15      SBC HL,DE
       0000                 12      JR  NZ,CEXE6
                                
       0000                 10      POP AF
       0000                 10      POP AF
       0000                 17      CALL    DEFCB
       0000                 10      LD  HL,00200H
       0000                 17      CALL    S27DTA
       0000                  7      ADD A,0FEH
       0000                 11      RET C
       0000                  4      LD  A,L
       0000                  4      OR  A
       0000                  4      SCF
       0000                 11      RET Z
       0000                  4      INC A
       0000                 11      PUSH    AF
                                ;   CALL    KEYBC
                                ;   LD  A,6
                                ;   CALL    MSG_A
       0000                 10      POP BC
       0000                 10      LD  HL,DATA
       0000                     BAT1:
       0000                  4      AND A
       0000                  4      DEC B
       0000                 11      RET Z
       0000                  7      LD  A,(HL)
       0000                  7      CP  '%'
       0000                 12      JR  Z,BAT2
       0000                     BAT1X:
       0000                  7      LD  A,(HL)
       0000                  6      INC HL
       0000                  7      CP  01AH
       0000                 11      RET Z
       0000                  7      CP  00AH
       0000                 17      CALL    NZ,KEYBS
       0000                 12      JR  BAT1
                                
       0000                     BAT2:
       0000                  6      INC HL
       0000                  7      LD  A,(HL)
       0000                  6      DEC HL
       0000                  7      SUB '1'
       0000                 12      JR  C,BAT1X
       0000                  7      CP  9
       0000                 12      JR  NC,BAT1X
       0000                  6      INC HL
       0000                  6      INC HL
       0000                  4      INC A
       0000                  4      LD  C,A
       0000                 20      LD  DE,(COMPAT+1)
       0000                     BAT3:
       0000                  7      LD  A,(DE)
       0000                  4      OR  A
       0000                 12      JR  Z,BAT1
       0000                 17      CALL    SPCUT
       0000                  4      DEC C
       0000                 12      JR  Z,BAT5
       0000                     BAT4:
       0000                  7      LD  A,(DE)
       0000                  7      CP  021H
       0000                 12      JR  C,BAT3
       0000                  6      INC DE
       0000                 12      JR  BAT4
       0000                     BAT5:
       0000                  7      LD  A,(DE)
       0000                  7      CP  021H
       0000                 12      JR  C,BAT1
       0000                  6      INC DE
       0000                 17      CALL    KEYBS
       0000                 12      JR  BAT5
                                
       0000                     SWITCH:
       0000                  7      LD  A,(DE)
       0000                     SW1:
       0000                  6      INC DE
       0000                  4      CP  C
       0000                  7      LD  A,(DE)
       0000                 11      RET Z
       0000                  7      CP  020H
       0000                 12      JR  NC,SW1
       0000                     C_REM:
       0000                  4      XOR A
       0000                 10      RET
                                
       0000                     C_DEL:
       0000                 17      CALL    SETFCB
       0000                  7      LD  C,8     ;(BDOS)エコーなしコンソール入力
       0000                 17      CALL    SYSTEM
                                
       0000                  7      LD  C,013H
       0000                 12      JR  CDEL1       ;(BDOS)ファイルの削除
                                
       0000                     C_REN:
       0000                 17      CALL    SETFCB
       0000                  7      LD  A,010H      ;ディレクトリも対象にする
       0000                 13      LD  (FCB1+13),A ;属性
       0000                  7      LD  C,017H      ;(BDOS)ファイル名の変更
       0000                     CDEL1:
       0000                 10      LD  DE,FCB1
       0000                 17      CALL    SYSTEM
       0000                  7      ADD A,0FFH
       0000                 10      RET
                                
       0000                     C_DIR:
       0000                 17      CALL    FILEC
       0000                 10      LD  HL,FDRV+1
       0000                 17      CALL    CWILD1
       0000                  7      LD  A,0F1H
       0000                 13      LD  (FDRV+13),A
       0000                 17      CALL    OPEN1
       0000                     CDIR1:
       0000                  4      OR  A
       0000                 12      JR  NZ,PDSKF
       0000                 17      CALL    P_NAME
       0000                 17      CALL    OPEN2
       0000                 12      JR  CDIR1
                                
       0000                     PDSKF:
       0000                 13      LD  A,(FDRV)
       0000                  4      LD  E,A
       0000                  7      LD  C,01BH      ;(BDOS)ディスク情報の獲得
       0000                 17      CALL    SYSTEM
       0000                  4      LD  C,A     ;C←1クラスタ辺りの論理セクタ数
       0000                  7      ADD A,001H
       0000                 11      RET C       ;Aが0FFHだった場合
       0000                  7      LD  A,8-2
       0000                     PDS1:               ;HL=未使用クラスタの総数
       0000                  4      INC A
       0000                  8      RR  C
       0000                 12      JR  NC,PDS1
       0000                     PDS2:               ;B←論理セクタのサイズの上位8ビット
       0000                  4      INC A
       0000                  8      RR  B
       0000                 12      JR  NC,PDS2
       0000                  4      LD  B,A
                                
       0000                 10      LD  DE,0
       0000                     PDS3:
       0000                 11      ADD HL,HL
       0000                  4      EX  DE,HL
       0000                 15      ADC HL,HL
       0000                  4      EX  DE,HL
       0000                 13      DJNZ    PDS3
       0000                     PDSKF1:
       0000                 17      CALL    PRDEC_DEHL
       0000                 10      LD  DE,FREE
       0000                  7      LD  C,9     ;(BDOS)文字列出力
       0000                 17      CALL    SYSTEM
       0000                 17      CALL    PUTDRV
       0000                  7      LD  A,05CH
       0000                 17      CALL    MSG_A
       0000                 13      LD  A,(MAJOR_VER)
       0000                  7      CP  1
       0000                 12      JR  C,LTNL
       0000                 12      JR  NZ,PDSKF2
       0000                 16      LD  HL,(FDRV+14)
       0000                  4      XOR A
       0000                 10      LD  DE,0-2
       0000                 11      ADD HL,DE
       0000                  6      INC HL
       0000                 17      CALL    C,PRDEC_HL
       0000                 12      JR  LTNL
       0000                     PDSKF2:             ;MSX-DOS2
       0000                 13      LD  A,(FDRV)
       0000                  4      LD  B,A     ;ドライブ
       0000                 10      LD  DE,DATA
       0000                  7      LD  C,059H      ;(BDOS)GETCD カレントディレクトリの獲得
       0000                 17      CALL    SYSTEM
       0000                 10      LD  HL,SYSTEM
       0000                 17      CALL    MSX
       0000                 12      JR  LTNL
                                
       0000                     MSX1:
       0000                  4      LD  E,A
       0000                 17      CALL    _PRINT
       0000                     MSX:
       0000                  7      LD  A,(HL)
       0000                  6      INC HL
       0000                  4      OR  A
       0000                 12      JR  NZ,MSX1
       0000                 10      RET
                                
       0000                     P_NAME:
       0000                 10      LD  HL,DTA_CCP+1
       0000                  7      LD  A,(HL)
       0000                  7      CP  '.'
       0000                 11      RET Z
       0000                 17      CALL    FPRNT
       0000                 13      LD  A,(DTA_CCP+13)
       0000                  8      BIT 4,A
       0000                 12      JR  Z,DIR3
       0000                 10      LD  DE,DIRMES
       0000                  7      LD  C,9     ;(BDOS)文字列出力
       0000                 17      CALL    SYSTEM
       0000                 12      JR  DIR6
       0000                     DIR3:
       0000                 20      LD  DE,(DTA_CCP+1+01EH)
       0000                 16      LD  HL,(DTA_CCP+1+01CH)
       0000                 17      CALL    PRDEC_DEHL
       0000                     DIR6:
       0000                 17      CALL    PRTTMS
                                
       0000                     LTNL:
       0000                  7      LD  E,00DH
       0000                 17      CALL    _PRINT
       0000                  7      LD  E,00AH
       0000                 10      JP  _PRINT
                                
       0000                     C_PATH:
       0000                 13      LD  A,(IS_MSX)
       0000                  4      OR  A
       0000                 11      RET Z
       0000                 17      CALL    SPCUT
       0000                 10      LD  HL,PATHD
       0000                  7      CP  021H
       0000                 12      JR  NC,CPATH0
       0000                     CPATHP:
       0000                  7      LD  A,(HL)
       0000                  6      INC HL
       0000                  7      CP  020H
       0000                  4      CCF
       0000                 12      JR  NC,LTNL
       0000                 17      CALL    MSG_A
       0000                 12      JR  CPATHP
       0000                     CPATH0:
       0000                  7      CP  ';'
       0000                 12      JR  NZ,CPATH1
       0000                  6      INC DE
       0000                     CPATH1:
       0000                  4      EX  DE,HL
       0000                 10      LD  BC,PATHX
       0000                         LDIR
       0000                 10      RET
                                
       0000                     PUTDRV:
       0000                 13      LD  A,(FDRV)
       0000                  4      OR  A
       0000                 12      JR  NZ,PUTDRV1
       0000                 11      PUSH    BC
       0000                 11      PUSH    DE
       0000                 11      PUSH    HL
       0000                  7      LD  C,019H
       0000                 17      CALL    SYSTEM
       0000                 10      POP HL
       0000                 10      POP DE
       0000                 10      POP BC
       0000                  4      INC A
       0000                     PUTDRV1:
       0000                  7      ADD A,'A'-1
       0000                 17      CALL    MSG_A
       0000                  7      LD  A,':'
       0000                     MSG_AR:
       0000                 10      JP  MSG_A
                                
       0000                     PRDEC_HL:
       0000                  4      XOR A
       0000                     PRDEC_AHL:
       0000                  4      LD  E,A
       0000                  7      LD  D,0
       0000                     PRDEC_DEHL:
       0000                  7      LD  A,2
       0000                 13      LD  (DEC6+1),A
       0000                  4      XOR A
       0000                 11      PUSH    HL
       0000                 10      LD  HL,DECBF
       0000                  7      LD  B,5
       0000                 17      CALL    FILL_MEMORY
       0000                 10      POP HL
                                
       0000                  7      LD  C,32
       0000                     DEC1:
       0000                 11      ADD HL,HL
       0000                  4      EX  DE,HL
       0000                 15      ADC HL,HL
       0000                  4      EX  DE,HL
       0000                 11      PUSH    HL
       0000                 10      LD  HL,DECBF+4
       0000                  7      LD  B,5
       0000                     DEC2:
       0000                  7      LD  A,(HL)
       0000                  4      ADC A,A
       0000                  4      DAA
       0000                  7      LD  (HL),A
       0000                  6      DEC HL
       0000                 13      DJNZ    DEC2
       0000                 10      POP HL
       0000                  4      DEC C
       0000                 12      JR  NZ,DEC1
                                
       0000                 10      LD  HL,DECBF
       0000                  7      LD  A,020H
       0000                  7      LD  B,4
       0000                     DEC3:
       0000                 17      CALL    DEC4
       0000                 17      CALL    DEC4
       0000                  6      INC HL
       0000                 13      DJNZ    DEC3
       0000                     DECX:
       0000                 17      CALL    DEC4
       0000                  4      XOR A
       0000                     DEC4:
       0000                 18      RLD
       0000                  7      CP  020H
       0000                 12      JR  Z,DEC6
       0000                  7      OR  030H
       0000                     DEC5:
       0000                 12      JR  MSG_AR
       0000                     DEC7:
       0000                  7      LD  A,020H
       0000                 12      JR  MSG_AR
       0000                     DEC6:
       0000                  7      LD  A,2
       0000                  4      OR  A
       0000                 12      JR  Z,DEC7
       0000                  4      DEC A
       0000                 13      LD  (DEC6+1),A
       0000                  7      LD  A,020H
       0000                 10      RET
                                
       0000                     FPRNT:
       0000                  7      LD  B,8
       0000                 17      CALL    P_N1
       0000                  7      LD  A,(HL)
       0000                  7      ADD A,0A0H-020H
       0000                  7      CP  0A0H
       0000                 12      JR  Z,FPR1
       0000                  7      LD  A,'.'
       0000                     FPR1:
       0000                 17      CALL    MSG_A
       0000                  7      LD  B,3
                                
       0000                     P_N1:
       0000                 11      PUSH    BC
       0000                 11      PUSH    HL
       0000                  7      LD  A,(HL)
       0000                 17      CALL    CAP3
       0000                 17      CALL    MSG_A
       0000                 10      POP HL
       0000                 10      POP BC
       0000                  6      INC HL
       0000                 13      DJNZ    P_N1
       0000                 10      RET
                                
       0000                     PRTTMS:
       0000                  7      LD  A,020H
       0000                 17      CALL    MSG_A
                                
       0000                 16      LD  HL,(DTA_CCP+1+24)
       0000                  4      LD  A,L
       0000                  4      OR  A
       0000                 11      RET Z
       0000                  8      SRL H
       0000                  4      RLA
       0000                  4      RLA
       0000                  4      RLA
       0000                  4      RLA
       0000                  7      AND 00FH
       0000                  4      LD  D,A
       0000                  4      LD  A,H
       0000                  7      ADD A,80
       0000                 17      CALL    PRDEC_A
       0000                  7      LD  A,'-'
       0000                 17      CALL    MSG_A
       0000                  4      LD  A,D
       0000                 17      CALL    PRDEC_A
       0000                  7      LD  A,'-'
       0000                 17      CALL    MSG_A
       0000                  4      LD  A,L
       0000                  7      AND 01FH
       0000                 17      CALL    PRDEC_A
                                
       0000                 17      CALL    GET_WIDTH
       0000                  7      CP  32+1
       0000                 12      JR  NC,SHOW_TIME
       0000                  7      LD  A,01DH
       0000                 10      JP  MSG_A
       0000                     SHOW_TIME:
       0000                 16      LD  HL,(DTA_CCP+1+22)
                                
       0000                  7      LD  A,020H
       0000                 17      CALL    MSG_A
       0000                  4      LD  A,H
       0000                  4      LD  H,L
       0000                  4      RRA
       0000                  8      RR  L
       0000                  4      RRA
       0000                  8      RR  L
       0000                  4      RRA
       0000                  8      RR  L
       0000                  7      AND 01FH
       0000                 17      CALL    PRDEC_A
       0000                  7      LD  A,':'
       0000                 17      CALL    MSG_A
       0000                  4      LD  A,L
       0000                  4      RRCA
       0000                  4      RRCA
       0000                  7      AND 03FH
       0000                 17      CALL    PRDEC_A
                                
       0000                  7      LD  A,':'
       0000                 17      CALL    MSG_A
       0000                  4      LD  A,H
       0000                  7      AND 01FH
       0000                  4      ADD A,A
                                
                                ;   PRINT10
                                
       0000                     PRDEC_A:
       0000                 11      PUSH    HL
       0000                  7      LD  B,8
       0000                  4      LD  C,A
       0000                  4      XOR A
       0000                     PRTA1:
       0000                  4      RLC C
       0000                  4      ADC A,A
       0000                  4      DAA
       0000                 13      DJNZ    PRTA1
       0000                 10      LD  HL,DECBF
       0000                  7      LD  (HL),A
       0000                  4      XOR A
       0000                 17      CALL    DECX
       0000                 10      POP HL
       0000                 10      RET
                                
       0000                     SETFCB:
       0000                 17      CALL    SPCUT
       0000                  7      LD  A,(DE)
       0000                  7      CP  020H
       0000                 12      JR  C,SETFCBA
       0000                  6      DEC DE
       0000                     SETFCBA:
       0000                 11      PUSH    DE
       0000                 10      LD  HL,FCB1
       0000                 10      LD  DE,FCB1+1
       0000                 10      LD  BC,00023H
       0000                  7      LD  (HL),B      ;B=0
       0000                         LDIR
       0000                 10      POP DE
       0000                 11      PUSH    DE
       0000                 10      LD  HL,FCB1
       0000                 17      CALL    _SYS29      ;(BDOS)ファイル名の解析
       0000                 10      LD  HL,FCB2
       0000                 17      CALL    _SYS29      ;(BDOS)ファイル名の解析
       0000                 10      POP HL
       0000                 10      LD  BC,05000H
       0000                 10      LD  DE,00081H
       0000                     SETFCB1:
       0000                  7      LD  A,(HL)
       0000                  6      INC HL
       0000                  7      CP  020H
       0000                 12      JR  C,SETFCB2
       0000                  7      LD  (DE),A
       0000                  6      INC DE
       0000                  4      INC C
       0000                 13      DJNZ    SETFCB1
       0000                     SETFCB2:
       0000                  4      LD  A,C
       0000                 13      LD  (DTA1),A
       0000                  4      INC B
       0000                  4      XOR A
       0000                     SETFCB3:
       0000                  7      LD  (DE),A
       0000                  6      INC DE
       0000                 13      DJNZ    SETFCB3
       0000                 10      RET
                                
       0000                     C_COPY:
       0000                 17      CALL    SETFCB
       0000                 10      LD  DE,DTA1+1
       0000                  7      LD  C,'/'
       0000                 17      CALL    SWITCH
       0000                 17      CALL    CAP
       0000                 13      LD  (SW+1),A
                                
       0000                 10      LD  DE,ZERO
       0000                 17      CALL    FILEC2
       0000                 10      LD  HL,FCB2
       0000                 17      CALL    S29X1
                                
       0000                  7      LD  A,010H
       0000                 13      LD  (FCB1+13),A
       0000                 10      LD  HL,FCB2+1
       0000                 17      CALL    CWILD1
       0000                     COPY0:
       0000                 17      CALL    CWILD
       0000                 10      LD  HL,FCB1
       0000                 17      CALL    OPEN
       0000                  4      SCF
       0000                     COPY1:
       0000                 11      RET NZ
       0000                 17      CALL    DEFCB
                                
       0000                 13      LD  A,(DTA_CCP+13)
       0000                  8      BIT 4,A
       0000                 12      JR  Z,COPY1A
                                
       0000                 10      LD  HL,FCB1+1
       0000                 17      CALL    CHKWILD
       0000                 12      JR  C,COPY9
                                
       0000                  7      LD  A,020H
       0000                 13      LD  (FCB1+1),A
       0000                 16      LD  HL,(DTA_CCP+26)
       0000                  6      INC HL
       0000                 16      LD  (FCB1+14),HL
       0000                 12      JR  COPY0
                                
       0000                     COPYS:
       0000                 10      LD  DE,SKIP
       0000                     COPY8:
       0000                  7      LD  C,9     ;(BDOS)文字列出力
       0000                 17      CALL    SYSTEM
       0000                 17      CALL    LTNL
       0000                     COPY9:
       0000                 17      CALL    OPEN2
       0000                 12      JR  COPY1
                                
       0000                     COPY1A:
       0000                 10      LD  HL,FCB2
       0000                 10      LD  DE,FDRV
       0000                 10      LD  BC,DTA_CCP+2
       0000                 16      LDI
       0000                  7      LD  A,11
       0000                     COPY2:
       0000                 11      PUSH    AF
       0000                  7      LD  A,(HL)
       0000                  7      CP  '?'
       0000                 12      JR  NZ,COPY3
       0000                  7      LD  A,(BC)
       0000                     COPY3:
       0000                  7      LD  (DE),A
       0000                  6      INC BC
       0000                  6      INC DE
       0000                  6      INC HL
       0000                 10      POP AF
       0000                  4      DEC A
       0000                 12      JR  NZ,COPY2
       0000                 10      LD  BC,16-11
       0000                         LDIR
       0000                     PUTNAME:
       0000                 10      LD  HL,FCB1+1
       0000                 17      CALL    CHKWILD
       0000                 12      JR  NC,PUTN1
       0000                 10      LD  HL,FDRV+1
       0000                 17      CALL    FPRNT
       0000                  7      LD  A,020H
       0000                 17      CALL    MSG_A
       0000                     PUTN1:
       0000                  7  SW: LD  A,000H
       0000                  7      CP  'T'
       0000                 12      JR  NZ,CSW1
       0000                 10      LD  HL,SWNE
       0000                 12      JR  SWT1
       0000                     CSW1:
       0000                  7      CP  'N'
       0000                 12      JR  NZ,SWNE
       0000                 10      LD  HL,COPYS
       0000                     SWT1:
       0000                 10      LD  DE,FDRV
       0000                 17      CALL    SYSC0F
       0000                 12      JR  Z,SWN1
       0000                  4      JP  (HL)
       0000                     SWN1:
       0000                 17      CALL    CTIME
       0000                 12      JR  NC,COPYS
       0000                     SWNE:
       0000                 10      LD  DE,FDRV
       0000                  7      LD  C,016H      ;(BDOS)ファイルの作成
       0000                 17      CALL    SYSTEM0
       0000                 12      JR  NZ,COPYE2
       0000                  4      LD  H,A     ;A=0
       0000                  4      LD  L,A
       0000                 16      LD  (FDRV+33),HL    ;(FCB)ランダム・レコード
       0000                 16      LD  (FDRV+35),HL
       0000                  4      INC L       ;HL=1
       0000                 16      LD  (FDRV+14),HL    ;(FCB)レコード・サイズ
       0000                     COPY6:
       0000                 17      CALL    BUFSIZ
       0000                 17      CALL    S27DTA
       0000                  4      INC A
       0000                 12      JR  Z,COPYE
       0000                  4      LD  B,A
       0000                  4      LD  A,H
       0000                  4      OR  L
       0000                 12      JR  Z,COPY7
       0000                 10      LD  DE,FDRV
       0000                 11      PUSH    BC
       0000                  7      LD  C,026H      ;(BDOS)ランダム・ブロック・ライト
       0000                 17      CALL    SYSTEM
       0000                 10      POP BC
       0000                  4      OR  A
       0000                 12      JR  NZ,COPYE
       0000                 13      DJNZ    COPY6
       0000                     COPY7:
       0000                 13      LD  A,(DTA_CCP+13)  ;(FCB)属性(アトリビュート)
       0000                 13      LD  (FDRV+13),A ;(FCB)属性(アトリビュート)
       0000                 10      LD  HL,DTA_CCP+20
       0000                 10      LD  DE,FDRV+20  ;(FCB)更新日時
       0000                 10      LD  BC,4
       0000                         LDIR
                                
       0000                 10      LD  DE,FDRV
       0000                  7      LD  C,010H      ;(BDOS)ファイルのクローズ
       0000                 17      CALL    SYSTEM0
       0000                 12      JR  NZ,COPYE
                                
       0000                 10      LD  DE,OK
       0000                 10      JP  COPY8
                                
       0000                     COPYE:
       0000                 10      LD  DE,FDRV
       0000                  7      LD  C,013H      ;(BDOS)ファイルの削除
       0000                 17      CALL    SYSTEM
       0000                     COPYE2:
       0000                  4      SCF
       0000                 10      RET
                                
       0000                     CTIME:
       0000                 20      LD  DE,(DTA_CCP+20)
       0000                 16      LD  HL,(FDRV+20)
       0000                  4      AND A
       0000                 15      SBC HL,DE
       0000                 11      RET NZ
       0000                 20      LD  DE,(DTA_CCP+22)
       0000                 16      LD  HL,(FDRV+22)
       0000                 15      SBC HL,DE
       0000                 10      RET
                                
       0000                     C_TYPE:
       0000                 17      CALL    SETFCB
       0000                 10      LD  HL,FCB1
       0000                 17      CALL    OPEN
       0000                  4      SCF
       0000                     TYPE1:
       0000                 11      RET NZ
       0000                 17      CALL    DEFCB
       0000                  7      LD  A,01AH
       0000                 17      CALL    MSG_A
       0000                     TYPE2:
       0000                 17      CALL    BUFSIZ
       0000                 17      CALL    S27DTA
       0000                  7      ADD A,0FEH
       0000                 11      RET C
       0000                  4      LD  A,H
       0000                  4      OR  L
       0000                 12      JR  Z,TYPEE
       0000                 10      LD  BC,DATA
       0000                     TYPE3:
       0000                  7      LD  A,(BC)
       0000                  6      INC BC
       0000                  7      CP  01AH
       0000                 12      JR  Z,TYPEE
       0000                  4      LD  E,A
       0000                 11      PUSH    BC
       0000                 11      PUSH    HL
       0000                  7      LD  C,2     ;(BDOS)コンソール出力
       0000                 17      CALL    SYSTEM
       0000                 10      POP HL
       0000                 10      POP BC
       0000                  6      DEC HL
       0000                  4      LD  A,H
       0000                  4      OR  L
       0000                 12      JR  NZ,TYPE3
       0000                 12      JR  TYPE2
       0000                     TYPEE:
       0000                 17      CALL    OPEN2
       0000                 12      JR  TYPE1
                                
       0000                     CWILD:
       0000                 10      LD  HL,FCB1+1
       0000                     CWILD1:
       0000                  7      LD  A,(HL)
       0000                  7      CP  020H
       0000                 11      RET NZ
       0000                     CWILD2:
       0000                  4      LD  D,H
       0000                  4      LD  E,L
       0000                  6      INC DE
       0000                 10      LD  BC,10
       0000                 10      LD  (HL),'?'
       0000                         LDIR
       0000                 10      RET
                                
       0000                     BUFSIZ:
       0000                 13      LD  A,(SYSTEM+2)
       0000                  7      SUB (DATA/256)+1
       0000                  7      AND 0F8H
       0000                  4      LD  H,A
       0000                  7      LD  L,0
       0000                 10      RET
                                
       0000                  4  JP_HL:  JP  (HL)
                                
       0000                     _PRINT:
       0000                 11      PUSH    BC
       0000                 11      PUSH    DE
       0000                 11      PUSH    HL
       0000                  7      LD  C,6
       0000                 17      CALL    SYSTEM
       0000                 10      POP HL
       0000                 10      POP DE
       0000                 10      POP BC
       0000                  4      OR  A
       0000                 10      RET
                                
       0000                     MSG_A:
       0000                 11      PUSH    AF
       0000                 11      PUSH    BC
       0000                 11      PUSH    DE
       0000                 11      PUSH    HL
       0000                  4      LD  E,A
       0000                  7      LD  C,2
       0000                 17      CALL    SYSTEM
       0000                 10      POP HL
       0000                 10      POP DE
       0000                 10      POP BC
       0000                 10      POP AF
       0000                 10      RET
                                ;       FILE
       0000                     FILEC:
       0000                 17      CALL    FILE
       0000                     FILEC2:
       0000                 13      LD  A,(FDRV+1)
       0000                  7      CP  020H
       0000                 11      RET Z
       0000                 12      JR  SETDIR1
                                
       0000                     FILE:
       0000                  4      XOR A
       0000                 13      LD  (FDRV),A
       0000                  4      LD  H,A
       0000                  4      LD  L,A
       0000                 16      LD  (FDRV+14),HL
       0000                 17      CALL    SPCUT
       0000                 17      CALL    CCHK3
       0000                 12      JR  Z,DEVI1
       0000                  6      INC DE
       0000                  7      LD  A,(DE)
       0000                  6      DEC DE
       0000                  7      CP  ':'
       0000                 12      JR  NZ,DEVI1
       0000                  7      LD  A,(DE)      ;DRIVE
       0000                 17      CALL    CAP
       0000                  7      SUB '@'
       0000                  6      INC DE
       0000                  6      INC DE
       0000                 13      LD  (FDRV),A
       0000                     DEVI1:
       0000                  7      LD  A,(DE)
       0000                  7      SUB 05CH        ;\
       0000                 12      JR  NZ,NOROOT
       0000                  4      LD  L,A     ;A=0でH=0のはずなのでHL=0
       0000                 16      LD  (FDRV+26),HL
       0000                  4      INC L
       0000                 16      LD  (FDRV+14),HL
       0000                  6      INC DE
       0000                     NOROOT:
                                
       0000                     SETDIR:
       0000                 17      CALL    FILED
       0000                  7      LD  A,(DE)
       0000                  7      CP  05CH        ;\
       0000                 11      RET NZ
       0000                  6      INC DE
       0000                     SETDIR1:
       0000                 13      LD  A,(IS_MSX)
       0000                  4      OR  A
       0000                 11      RET NZ
                                                ;for LSX-Dodgers
       0000                  7      LD  A,010H      ;Directory
       0000                 13      LD  (FDRV+13),A
       0000                 11      PUSH    DE
       0000                 10      LD  DE,FDRV
       0000                  7      LD  C,00FH
       0000                 17      CALL    SYSTEM
       0000                 10      POP DE
       0000                  4      OR  A
       0000                 11      RET NZ
                                
       0000                 13      LD  A,(FDRV+13)
       0000                  8      BIT 4,A
       0000                 11      RET Z
                                
       0000                 17      CALL    FILEI
       0000                 16      LD  HL,(FDRV+26)
       0000                  6      INC HL
       0000                 16      LD  (FDRV+14),HL
       0000                 12      JR  SETDIR
                                
       0000                     FILED:
       0000                 17      CALL    FILEI
                                
       0000                  7      LD  B,8
       0000                     FILE2:
       0000                 17      CALL    CCHKF
       0000                 11      RET Z
       0000                  7      CP  '*'
       0000                 12      JR  Z,FILE9
       0000                  7      CP  '.'
       0000                 12      JR  Z,FILE4
       0000                  7      LD  (HL),A
       0000                  6      INC HL
       0000                 13      DJNZ    FILE2
                                
       0000                     FILE3:
       0000                 17      CALL    CCHKF
       0000                 11      RET Z
       0000                  7      CP  '.'
       0000                 12      JR  NZ,FILE3
                                
       0000                     FILE4:
       0000                 10      LD  HL,FNAME+8
       0000                  7      LD  B,3
                                
       0000                     FILE4L:
       0000                 17      CALL    CCHKF
       0000                 11      RET Z
       0000                  7      CP  '.'
       0000                 12      JR  NZ,FILE12
       0000                 13      LD  (FNAME),A   ;Parent directory(..)
       0000                 13      LD  (FNAME+1),A
       0000                  7      LD  A,020H
       0000                     FILE12:
       0000                  7      CP  '*'
       0000                 12      JR  Z,FILE10
       0000                  7      LD  (HL),A
       0000                  6      INC HL
       0000                 13      DJNZ    FILE4L
       0000                 10      RET
                                
       0000                     FILE9:              ;名前の*処理、名前の残りを?で埋める
       0000                 17      CALL    FILE10
       0000                 12      JR  FILE3
                                
       0000                     FILE10:
       0000                  7      LD  A,'?'
                                
       0000                     FILL_MEMORY:                ;HLからBバイトAで埋める
       0000                  7      LD  (HL),A
       0000                  6      INC HL
       0000                 13      DJNZ    FILL_MEMORY
       0000                 10      RET
                                
       0000                     FILEI:              ;名前＋拡張子をスペースで初期化
       0000                  7      LD  A,020H
       0000                 10      LD  BC,11*256
       0000                 10      LD  HL,FNAME
       0000                 11      PUSH    HL
       0000                 17      CALL    FILL_MEMORY
       0000                 10      POP HL
       0000                 10      RET
                                
       0000                     CCHKF:
       0000                  7      LD  A,(DE)
       0000                 17      CALL    CCHK2
       0000                 11      RET Z
       0000                 10      JP  FKAN
                                
       0000                     CCHK2:
       0000                  4      INC C
       0000                  4      DEC C
       0000                 11      RET NZ
       0000                     CCHK3:              ;ZF=1 で使えない文字
       0000                  7      CP  '+'
       0000                 11      RET Z
       0000                  7      CP  ','
       0000                 11      RET Z
       0000                  7      CP  '/'
       0000                 11      RET Z
       0000                  7      CP  ':'
       0000                 11      RET Z
       0000                  7      CP  ';'
       0000                 11      RET Z
       0000                  7      CP  '='
       0000                 11      RET Z
       0000                  7      CP  05CH    ;\
       0000                 11      RET Z
       0000                  7      CP  020H
       0000                 11      RET NC
       0000                  4      CP  A       ;Z=1
       0000                 10      RET
                                
       0000                     SS1:
       0000                  6      INC DE
       0000                     SPCUT:              ;スペースをカット
       0000                  7      LD  A,(DE)
       0000                  7      CP  020H
       0000                 12      JR  Z,SS1
       0000                 10      RET
                                
       0000                     CAP:
       0000                  7      CP  'a'
       0000                 11      RET C
       0000                  7      CP  'z'+1
       0000                 11      RET NC
       0000                  7      SUB 020H
       0000                 10      RET
       0000                     CAP2:
       0000                 17      CALL    CAP
       0000                     CAP3:
       0000                 17      CALL    CAP4
       0000                  7      CP  021H
       0000                 11      RET NC
       0000                  7      LD  A,020H
       0000                 10      RET
       0000                     CAP4:
       0000                  7      CP  5
       0000                 11      RET NZ
       0000                  7      LD  A,0E5H
       0000                 10      RET
                                
       0000                     FKANC:
       0000                  8      BIT 0,C
       0000                 17      CALL    Z,CAP2
       0000                 12      JR  FKANX
       0000                     FKAN:           ;漢字チェック
       0000                  6      INC DE
       0000                     FKANX:
       0000                  8      BIT 0,C
       0000                  8      RES 0,C
       0000                 11      RET NZ
       0000                  7      CP  080H
       0000                 11      RET C
       0000                  7      CP  0A0H
       0000                 12      JR  C,FKAN1
       0000                  7      CP  0E0H
       0000                 11      RET C
       0000                     FKAN1:
       0000                  4      INC C
       0000                  4      AND A
       0000                 10      RET
                                
       0000                     CHKWILDX:
       0000                 15      PUSH    IY
       0000                 10      POP HL
       0000                  6      INC HL
       0000                     CHKWILD:
       0000                  7      LD  B,11
       0000                  7      LD  A,'?'
       0000                     CHKWIL1:
       0000                  7      CP  (HL)
       0000                  6      INC HL
       0000                  4      SCF
       0000                 11      RET Z
       0000                 13      DJNZ    CHKWIL1
       0000                  4      XOR A
       0000                 10      RET
                                
       0000                     CPNAME:
       0000                 11      PUSH    BC
       0000                 11      PUSH    DE
       0000                 10      LD  DE,CPBUF
       0000                 10      LD  BC,4
       0000                         LDIR
       0000                 10      POP DE
       0000                 11      PUSH    DE
       0000                 11      PUSH    HL
       0000                 10      LD  HL,CPBUF
       0000                 17      CALL    CPFILE
       0000                 10      POP HL
       0000                 10      POP DE
       0000                 10      POP BC
       0000                 12      JR  NZ,CPNAME1
       0000                  7      LD  A,(HL)
       0000                  6      INC HL
       0000                  7      LD  H,(HL)
       0000                  4      LD  L,A
       0000                 10      RET
       0000                     CPNAME1:
       0000                  6      INC HL
       0000                  6      INC HL
       0000                 13      DJNZ    CPNAME
       0000                  4      SCF
       0000                 10      RET
                                
       0000                     CPFILE:
       0000                 11      PUSH    BC
       0000                 10      LD  BC,00B00H
       0000                     CPSTR1:
       0000                  7      LD  A,(DE)
       0000                  7      CP  '?'     ;Wild card
       0000                 12      JR  Z,CPSTR2
       0000                  7      LD  A,(HL)
       0000                 17      CALL    FKANC
       0000                 11      PUSH    HL
       0000                  4      LD  H,A
       0000                  7      LD  A,(DE)
       0000                  4      RLC C
       0000                 17      CALL    FKANC
       0000                  4      RRC C
       0000                  4      CP  H       ;CP (HL),(DE)
       0000                 10      POP HL
       0000                 12      JR  NZ,CPSTR3
       0000                     CPSTR2:
       0000                  6      INC DE
       0000                  6      INC HL
       0000                 13      DJNZ    CPSTR1
       0000                     CPSTR3:
       0000                 10      POP BC
       0000                 10      RET
                                
       0000                     CPFILE2:
       0000                 19      LD  A,(IY+13)   ;(FCB)属性(アトリビュート)
       0000                  7      OR  0E1H
       0000                  4      CPL
       0000                  7      AND (HL)
       0000                 10      RET
                                
       0000                     _SYS29:     ;(BDOS)ファイル名の解析
       0000                 11      PUSH    BC
       0000                 11      PUSH    HL
       0000                 17      CALL    FILE
       0000                 10      POP HL
       0000                 10      POP BC
       0000                     S29X1:
       0000                 11      PUSH    BC
       0000                 11      PUSH    DE
       0000                 11      PUSH    HL
       0000                  4      EX  DE,HL
       0000                 10      LD  HL,FDRV
       0000                 10      LD  BC,13
       0000                         LDIR
       0000                  7      LD  (HL),B      ;B=0
       0000                  7      LD  C,3
       0000                         LDIR
       0000                 10      POP HL
       0000                 10      POP DE
       0000                 10      POP BC
       0000                  4      XOR A
       0000                 10      RET
       0000                     GET_WIDTH:
       0000                 13      LD  A,(IS_MSX)
       0000                  4      OR  A
       0000                 12      JR  Z,NOT_MSX
       0000                 13      LD  A,(LINLEN)
       0000                 10      RET
       0000                     NOT_MSX:
       0000                 11      PUSH    HL
       0000                 16      LD  HL,(BASE-1)
       0000                  7      LD  L,0B1H
       0000                  7      LD  A,(HL)
       0000                 10      POP HL
       0000                 10      RET
                                
       0000                     KEYBS:
       0000                  4      OR  A
       0000                 11      RET Z
       0000                     KEYBS1:
       0000                 11      PUSH    DE
       0000                 11      PUSH    HL
       0000                 11      PUSH    AF
       0000                 16      LD  HL,(PUTPNT)
       0000                  6      INC HL
       0000                 10      LD  DE,KEYBUFE
       0000                  4      AND A
       0000                 15      SBC HL,DE
       0000                 11      ADD HL,DE
       0000                 12      JR  NZ,KEYBS2
       0000                 10      LD  HL,KEYBUF
       0000                     KEYBS2:
       0000                 20      LD  DE,(GETPNT)
       0000                  4      AND A
       0000                 15      SBC HL,DE
       0000                 11      ADD HL,DE
       0000                 12      JR  Z,KEYBS3
       0000                 10      POP AF
       0000                 20      LD  DE,(PUTPNT)
       0000                  7      LD  (DE),A
       0000                 16      LD  (PUTPNT),HL
       0000                 10      POP HL
       0000                 10      POP DE
       0000                 10      RET
       0000                     KEYBS3:
       0000                 10      POP AF
       0000                 10      POP HL
       0000                 10      POP DE
       0000                 10      RET
                                
                                COMS    EQU 9
       0000                     COMTB:
       0000                         DB  "D   "  ;1
       0000                         DW  C_DIR
       0000                         DB  "DIR "  ;2
       0000                         DW  C_DIR
       0000                         DB  "COPY"  ;3
       0000                         DW  C_COPY
       0000                         DB  "CD  "  ;4
       0000                         DW  C_CD
       0000                         DB  "DEL "  ;5
       0000                         DW  C_DEL
       0000                         DB  "PATH"  ;6
       0000                         DW  C_PATH
       0000                         DB  "REN "  ;7
       0000                         DW  C_REN
       0000                         DB  "TYPE"  ;8
       0000                         DW  C_TYPE
       0000                         DB  "REM "  ;9
       0000                         DW  C_REM
                                
       0000                     FREE:   DB  " bytes free  $"
       0000                     DIRMES: DB  "     <DIR>$"
       0000                     OK: DB  "OK$"
       0000                     SKIP:   DB  "Skip$"
       0000                     COMERM: DB  "Error!$"
                                
       0000                     IS_MSX:
       0000                         DB  0
       0000                     MAJOR_VER:
       0000                         DB  0
                                
       0000                     ZERO:   DB  0
                                
       0000                     DTA_CCP:
                                    DS  37
       0000                     CPBUF:
       0000                     LEFTX:  DW  0
       0000                     DTAX:   DW  0
       0000                         DB  020H    ;CPBUFで使う
       0000                         DB  020H
       0000                         DB  020H
       0000                         DB  020H
       0000                         DB  020H
       0000                         DB  020H
       0000                         DB  020H
                                
       0000                     DECBF:
                                    DS  5
       0000                     FDRV:
       0000                         DB  0
       0000                     FNAME:
                                    DS  36
       0000                         DB  0
                                
       0000                     DATA:
[EOF:COMMAND.ASM:SHIFT_JIS]
